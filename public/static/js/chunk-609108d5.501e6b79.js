(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-609108d5"],{"29c6":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"page-content"},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-head"},[t._v("\n          团队成员\n\n          "),a("div",{staticClass:"search-input"},[a("Input",{attrs:{size:"small",placeholder:"请输入邮箱搜索",search:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)]),a("div",{staticClass:"card-body padding-top0"},[a("div",{staticClass:"card-menu"},[1==t.userInfo.role.is_admin?a("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",icon:"md-add"},on:{click:t.addClick}},[t._v("新增")]):t._e()],1),a("Table",{attrs:{border:"",loading:t.load,columns:t.columns,data:t.data},scopedSlots:t._u([{key:"avatar",fn:function(t){var e=t.row;return[a("Avatar",{attrs:{src:e.avatar}})]}},{key:"capacity",fn:function(e){var i=e.row;return[a("span",[t._v(t._s((i.capacity/1024/1024/1024).toFixed(2))+" G")])]}},{key:"user_size",fn:function(e){var i=e.row;return[a("span",[t._v(t._s((i.user_size/1024/1024/1024).toFixed(2))+" G")])]}},{key:"state",fn:function(e){var i=e.row;return[0===i.state?a("Badge",{attrs:{status:"error",text:"已停用"}}):t._e(),1===i.state?a("Badge",{attrs:{status:"success",text:"已启用"}}):t._e(),2===i.state?a("Badge",{attrs:{status:"warning",text:"待审核"}}):t._e()]}},{key:"action",fn:function(e){var i=e.row;return[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.editClick(i)}}},[t._v("编辑")]),a("Button",{attrs:{type:"error",size:"small"},on:{click:function(e){return t.del(i.id)}}},[t._v("删除")])]}}])}),a("div",{staticClass:"paging"},[a("Page",{attrs:{total:Number(t.total),current:t.page,"page-size":t.size,simple:t.$store.state.isMobile,"show-total":"","show-sizer":"","show-elevator":""},on:{"on-change":t.pageChange,"on-page-size-change":t.pageSizeChange}})],1)],1)])])]),a("Modal",{attrs:{width:600,title:t.edit?"编辑成员":"新增成员",loading:t.creating,"class-name":"vertical-center-modal"},on:{"on-ok":function(e){t.edit?t.editSave():t.addSave()}},model:{value:t.modal2,callback:function(e){t.modal2=e},expression:"modal2"}},[a("Form",{ref:"create",attrs:{model:t.createData,rules:t.createRules,"label-width":100}},[a("FormItem",{attrs:{label:"邮箱/账号",prop:"email"}},[a("Input",{attrs:{placeholder:"请输入邮箱"},model:{value:t.createData.email,callback:function(e){t.$set(t.createData,"email",e)},expression:"createData.email"}})],1),a("FormItem",{attrs:{label:"角色组",prop:"role_id"}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择角色组"},model:{value:t.createData.role_id,callback:function(e){t.$set(t.createData,"role_id",e)},expression:"createData.role_id"}},t._l(t.roleList,(function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1),a("FormItem",{attrs:{label:"总配额/G",prop:"capacity"}},[a("InputNumber",{staticStyle:{width:"70%"},attrs:{min:0},model:{value:t.createData.capacity,callback:function(e){t.$set(t.createData,"capacity",e)},expression:"createData.capacity"}})],1),a("FormItem",{attrs:{label:"姓名"}},[a("Input",{attrs:{placeholder:"请输入姓名"},model:{value:t.createData.username,callback:function(e){t.$set(t.createData,"username",e)},expression:"createData.username"}})],1),a("FormItem",{attrs:{label:"联系电话"}},[a("Input",{attrs:{placeholder:"请输入联系电话"},model:{value:t.createData.phone,callback:function(e){t.$set(t.createData,"phone",e)},expression:"createData.phone"}})],1),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:t.edit,expression:"edit"}],attrs:{label:"重置密码",prop:"pwd"}},[a("i-switch",{attrs:{"true-value":1,"false-value":0},model:{value:t.createData.pwd,callback:function(e){t.$set(t.createData,"pwd",e)},expression:"createData.pwd"}}),a("p",{directives:[{name:"show",rawName:"v-show",value:1==t.createData.pwd,expression:"createData.pwd == 1"}],staticStyle:{"font-size":"12px",color:"red"}},[t._v("\n          * 密码将会重置为：123456\n        ")])],1),a("FormItem",{attrs:{label:"状态",prop:"state"}},[a("i-switch",{attrs:{"true-value":1,"false-value":0},model:{value:t.createData.state,callback:function(e){t.$set(t.createData,"state",e)},expression:"createData.state"}})],1)],1)],1),a("Modal",{attrs:{width:"360"},model:{value:t.modal3,callback:function(e){t.modal3=e},expression:"modal3"}},[a("p",{staticStyle:{color:"#f60"},attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"ios-information-circle"}}),a("span",[t._v("删除确认")])],1),a("div",[a("p",[t._v("删除用户不会删除此用户之前上传的图片，可通过新增相同邮箱恢复用户，是否删除？\n      ")])]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"error",size:"large",long:"",loading:t.modal_loading},on:{click:t.delFunction}},[t._v("确认删除")])],1)])],1)},n=[],r=(a("8e6e"),a("ac6a"),a("456d"),a("7f7f"),a("ade3")),c=a("365c"),s=a("2f62");function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var d={data:function(){return{page:1,size:10,name:"",total:"",load:!0,data:[],roleInfo:{},modal2:!1,modal3:!1,edit:!1,columns:[{title:"ID",key:"id",align:"center",minWidth:80,fixed:"left"},{title:"头像",align:"center",slot:"avatar",minWidth:70},{title:"邮箱/账号",key:"email",align:"center",minWidth:200,fixed:"left"},{title:"姓名",key:"username",align:"center",minWidth:120},{title:"联系电话",key:"phone",align:"center",minWidth:130},{title:"角色组",key:"role_name",align:"center",minWidth:130},{title:"创建时间",key:"create_time",align:"center",minWidth:180},{title:"总配额",align:"center",slot:"capacity",minWidth:100},{title:"已用容量",align:"center",slot:"user_size",minWidth:100},{title:"状态",minWidth:130,align:"center",slot:"state"},{title:"操作",minWidth:150,align:"center",slot:"action",fixed:"right"}],roleList:[],createData:{},createRules:{email:[{required:!0,message:"请输入邮箱",trigger:"blur"}],role_id:[{required:!0,message:"请选择角色组"}],capacity:[{required:!0,message:"请输入总配额"}]},creating:!0,delId:"",modal_loading:!1}},created:function(){this._getData(),this._getRole(),1!=this.userInfo.role.is_admin&&this.columns.pop()},computed:l({},Object(s["c"])(["userInfo"])),watch:{name:function(t,e){t!=e&&(this.page=1,this.load=!0,this._getData())}},methods:{_getData:function(){var t=this;Object(c["i"])({page:this.page,size:this.size,name:this.name}).then((function(e){t.data=e.data.data,t.total=e.data.total,t.load=!1}))},editClick:function(t){this.createData={},this.edit=!0,this.modal2=!0,this.createData=l(l({},t),{},{pwd:0}),this.createData.capacity=this.createData.capacity>0?this.createData.capacity/1024/1024/1024:this.createData.capacity},addClick:function(){this.edit=!1,this.modal2=!0,this.createData={email:"",role_id:"",username:"",phone:"",capacity:0,state:1,avatar:"https://oss.aliyuncs.com/aliyun_id_photo_bucket/default_handsome.jpg"}},addSave:function(){var t=this;this.$refs.create.validate((function(e){e?(Object(c["s"])({email:t.createData.email,role_id:t.createData.role_id,username:t.createData.username,phone:t.createData.phone,capacity:1024*t.createData.capacity*1024*1024,state:t.createData.state,avatar:t.createData.avatar}).then((function(e){200==e.code?(t.$Message.success({background:!0,content:e.msg}),t._getData(),t.modal2=!1):t.$Message.error({background:!0,content:e.msg})})),t.creating=!1,t.$nextTick((function(){t.creating=!0}))):(t.creating=!1,t.$nextTick((function(){t.creating=!0})))}))},editSave:function(){var t=this;this.$refs.create.validate((function(e){e?(Object(c["x"])({id:t.createData.id,email:t.createData.email,role_id:t.createData.role_id,username:t.createData.username,phone:t.createData.phone,capacity:1024*t.createData.capacity*1024*1024,state:t.createData.state,pwd:t.createData.pwd}).then((function(e){200==e.code?(t.$Message.success({background:!0,content:e.msg}),t._getData(),t.modal2=!1):t.$Message.error({background:!0,content:e.msg})})),t.creating=!1,t.$nextTick((function(){t.creating=!0}))):(t.creating=!1,t.$nextTick((function(){t.creating=!0})))}))},del:function(t){this.delId=t,this.modal3=!0},delFunction:function(){var t=this;this.modal_loading=!0,Object(c["b"])({id:this.delId}).then((function(e){200==e.code?(t.$Message.success({background:!0,content:e.msg}),t._getData()):t.$Message.error({background:!0,content:e.msg}),t.modal_loading=!1,t.modal3=!1}))},pageChange:function(t){this.page=t,this.load=!0,this._getData()},pageSizeChange:function(t){this.load=!0,this.page=1,this.size=t,this._getData()},_getRole:function(){var t=this;Object(c["j"])({page:1,size:100,name:""}).then((function(e){t.roleList=e.data.data}))}}},u=d,p=(a("3f9e"),a("2877")),m=Object(p["a"])(u,i,n,!1,null,"9ec1eb64",null);e["default"]=m.exports},"3f9e":function(t,e,a){"use strict";a("4622")},4622:function(t,e,a){},"7f7f":function(t,e,a){var i=a("86cc").f,n=Function.prototype,r=/^\s*function ([^ (]*)/,c="name";c in n||a("9e1e")&&i(n,c,{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=chunk-609108d5.501e6b79.js.map