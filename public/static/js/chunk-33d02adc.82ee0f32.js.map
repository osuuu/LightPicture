{"version":3,"sources":["webpack:///./src/views/user/update.vue?052b","webpack:///src/views/user/update.vue","webpack:///./src/views/user/update.vue?8747","webpack:///./src/views/user/update.vue","webpack:///./src/views/user/update.vue?1514"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","attrs","_s","config","version","time","data","_e","isUpdate","loading","on","_getData","staticStyle","domProps","info","editload","_postUpdate","error","explain","model","value","callback","$$v","modal","expression","staticRenderFns","component"],"mappings":"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","file":"static/js/chunk-33d02adc.82ee0f32.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"page-content\"},[_c('div',{staticClass:\"container-fluid\"},[_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-head\"},[_vm._v(\"软件更新\")]),_c('div',{staticClass:\"card-body\"},[_c('Alert',{attrs:{\"show-icon\":\"\"}},[_vm._v(\"为较好的体验感，系统不会自动检测新版本，需点击“检测更新”手动获取\")]),_c('div',{staticClass:\"auth\"},[(_vm.isUpdate)?_c('div',{staticClass:\"title\"},[_vm._v(\" 发现新版本啦\")]):_c('div',{staticClass:\"title\"},[_c('Icon',{attrs:{\"type\":\"md-thumbs-up\",\"color\":\"#ff5473\"}}),_vm._v(\"\\n              当前已是最新版啦\")],1),_c('div',{staticClass:\"version\"},[_vm._v(\" 当前程序版本：\"+_vm._s(_vm.config.version)+\" （\"+_vm._s(_vm.config.time)+\"）\")]),(_vm.isUpdate)?_c('div',{staticClass:\"version\"},[_vm._v(\" 最新程序版本：\"+_vm._s(_vm.data.version)+\" （\"+_vm._s(_vm.data.time)+\"） \")]):_vm._e(),(!_vm.isUpdate)?_c('Button',{attrs:{\"type\":\"primary\",\"loading\":_vm.loading},on:{\"click\":_vm._getData}},[_vm._v(\"检测更新\")]):_vm._e(),(_vm.isUpdate)?_c('p',{staticStyle:{\"margin\":\"5px 0 15px 0\"},domProps:{\"innerHTML\":_vm._s(_vm.data.info)}}):_vm._e(),(_vm.isUpdate)?_c('Button',{attrs:{\"type\":\"success\",\"loading\":_vm.editload},on:{\"click\":_vm._postUpdate}},[_vm._v(\"立即更新\")]):_vm._e()],1),_c('Divider'),(_vm.speedload)?_c('div',{staticClass:\"auth\"},[(!_vm.error)?_c('div',{staticClass:\"speed\"},[_c('span',{staticClass:\"loader-77\"})]):_vm._e(),_c('div',{staticClass:\"speed-sm\"},[_vm._v(\"\\n              \"+_vm._s(_vm.explain)+\"\\n            \")])]):_vm._e()],1)])])]),_c('Modal',{attrs:{\"title\":\"数据库更新\",\"class-name\":\"vertical-center-modal\",\"footer-hide\":\"\"},model:{value:(_vm.modal),callback:function ($$v) {_vm.modal=$$v},expression:\"modal\"}},[_c('iframe',{attrs:{\"src\":\"/admin/home/update\",\"frameborder\":\"0\"}})])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <div class=\"page-content\">\r\n      <div class=\"container-fluid\">\r\n        <div class=\"card\">\r\n          <div class=\"card-head\">软件更新</div>\r\n          <div class=\"card-body\">\r\n             <Alert show-icon>为较好的体验感，系统不会自动检测新版本，需点击“检测更新”手动获取</Alert>\r\n            <div class=\"auth\">\r\n              <div class=\"title\" v-if=\"isUpdate\"> 发现新版本啦</div>\r\n              <div class=\"title\" v-else>\r\n                <Icon type=\"md-thumbs-up\" color=\"#ff5473\" />\r\n                当前已是最新版啦</div>\r\n              <div class=\"version\"> 当前程序版本：{{config.version}} （{{config.time}}）</div>\r\n\r\n              <div class=\"version\" v-if=\"isUpdate\"> 最新程序版本：{{data.version}} （{{data.time}}） </div>\r\n\r\n\r\n\r\n              <Button v-if=\"!isUpdate\" type=\"primary\" @click=\"_getData\" :loading=\"loading\">检测更新</Button>\r\n\r\n\r\n\r\n              <p style=\"margin:5px 0 15px 0\" v-if=\"isUpdate\" v-html=\"data.info\"></p>\r\n              <Button v-if=\"isUpdate\" type=\"success\" @click=\"_postUpdate\" :loading=\"editload\">立即更新</Button>\r\n\r\n\r\n\r\n            </div>\r\n\r\n            <Divider />\r\n            <div class=\"auth\" v-if=\"speedload\">\r\n              <div class=\"speed\" v-if=\"!error\">\r\n                <span class=\"loader-77\"> </span>\r\n              </div>\r\n              <div class=\"speed-sm\">\r\n                {{explain}}\r\n              </div>\r\n\r\n\r\n            </div>\r\n\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <Modal v-model=\"modal\" title=\"数据库更新\" class-name=\"vertical-center-modal\" footer-hide>\r\n      <iframe src=\"/admin/home/update\" frameborder=\"0\"></iframe>\r\n    </Modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {\r\n    getUpdate,\r\n    postUpdate,\r\n  } from \"@/api/index\";\r\n  import {\r\n    mapState,\r\n  } from 'vuex'\r\n  export default {\r\n    data() {\r\n      return {\r\n        data: {},\r\n        loading: false,\r\n        isUpdate: false,\r\n        editload: false,\r\n        speedload: false,\r\n        error: false,\r\n        explain: \"\",\r\n\r\n        file: \"\"\r\n      };\r\n    },\r\n    computed: {\r\n      ...mapState(['config']),\r\n    },\r\n\r\n    methods: {\r\n      // 获取更新\r\n      _getData() {\r\n        this.loading = true\r\n        getUpdate().then((res) => {\r\n          this.loading = false\r\n          if (res.code == 1001) {\r\n            this.$Message.success({\r\n              background: true,\r\n              content: res.msg,\r\n            });\r\n          }\r\n          if (res.code == 1002) {\r\n            this.data = res.data\r\n            this.isUpdate = true\r\n          }\r\n        });\r\n      },\r\n\r\n      // 更新\r\n      _postUpdate() {\r\n        this.editload = true\r\n        this.speedload = true\r\n        this.explain = \"程序更新中...请不要返回和关闭页面，请保持网络通畅\"\r\n        postUpdate().then((res) => {\r\n          if (res.code == 200) {\r\n            this.error = true\r\n            this.editload = false\r\n            this.explain = res.msg\r\n          } else {\r\n            this.error = true\r\n            this.explain = '更新失败... '+res.msg\r\n            this.editload = false\r\n          }\r\n        });\r\n\r\n        // this.error = false\r\n      },\r\n\r\n    \r\n    \r\n\r\n\r\n\r\n    },\r\n  };\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  iframe {\r\n    width: 100%;\r\n    min-height: 200px;\r\n  }\r\n\r\n  .auth {\r\n    padding: 12px;\r\n    background-color: #fff;\r\n    border: 1px solid #f7f7f7;\r\n    border-left: 4px solid #339fd4;\r\n    border-radius: 5px;\r\n    position: relative;\r\n    margin-bottom: 20px;\r\n\r\n    .title {\r\n      color: #ff5473;\r\n      font-weight: 600;\r\n      font-size: 18px;\r\n    }\r\n\r\n    .version {\r\n      line-height: 35px;\r\n    }\r\n\r\n    .btn {\r\n      margin: 10px 0;\r\n    }\r\n  }\r\n\r\n  .speed-sm {\r\n    margin: 5px 0;\r\n    font-size: 14px;\r\n    color: #1C1D1F;\r\n  }\r\n\r\n  .speed {\r\n\r\n\r\n    .loader-77 {\r\n      width: 100%;\r\n      height: 8px;\r\n      display: inline-block;\r\n      position: relative;\r\n      overflow: hidden;\r\n    }\r\n\r\n    .loader-77::before {\r\n      content: \"\";\r\n      top: 0;\r\n      left: 0;\r\n      height: 100%;\r\n      width: 100%;\r\n      position: absolute;\r\n      background-color: rgba(255, 255, 255, 0.15);\r\n      background-image: linear-gradient(45deg, rgba(0, 0, 0, 0.25) 25%, transparent 25%, transparent 50%, rgba(0, 0, 0, 0.25) 50%, rgba(0, 0, 0, 0.25) 75%, transparent 75%, transparent);\r\n      background-size: 15px 15px;\r\n      z-index: 10;\r\n    }\r\n\r\n    .loader-77::after {\r\n      content: \"\";\r\n      width: 0%;\r\n      height: 100%;\r\n      background-image: linear-gradient(to right, rgb(16, 142, 233) 0%, rgb(135, 208, 104) 100%);\r\n      position: absolute;\r\n      border-radius: 0 4px 4px 0;\r\n      top: 0;\r\n      left: 0;\r\n      -webkit-animation: animFw 10s ease-in infinite;\r\n      animation: animFw 10s ease-in infinite;\r\n    }\r\n\r\n    @-webkit-keyframes animFw {\r\n      0% {\r\n        width: 0;\r\n      }\r\n\r\n      100% {\r\n        width: 100%;\r\n      }\r\n    }\r\n\r\n    @keyframes animFw {\r\n      0% {\r\n        width: 0;\r\n      }\r\n\r\n      100% {\r\n        width: 100%;\r\n      }\r\n    }\r\n  }\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./update.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./update.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./update.vue?vue&type=template&id=04639f59&scoped=true&\"\nimport script from \"./update.vue?vue&type=script&lang=js&\"\nexport * from \"./update.vue?vue&type=script&lang=js&\"\nimport style0 from \"./update.vue?vue&type=style&index=0&id=04639f59&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"04639f59\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./update.vue?vue&type=style&index=0&id=04639f59&lang=less&scoped=true&\""],"sourceRoot":""}